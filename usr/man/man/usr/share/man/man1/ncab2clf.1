'\" te
.\" Copyright (c) 2001, 2011, Oracle and/or its affiliates. All rights reserved.
.TH ncab2clf 1 "11 Feb 2011" "SunOS 5.11" "User Commands"
.SH NAME
ncab2clf \- convert binary log file to Common Log File format
.SH SYNOPSIS
.LP
.nf
\fB/usr/bin/ncab2clf\fR [\fB-Dhv\fR] [\fB-i\fR \fIinput-file\fR] [\fB-o\fR \fIoutput-file\fR] 
     [\fB-b\fR \fIsize\fR] [\fB-n\fR \fInumber\fR] [\fB-s\fR \fIdatetime\fR]
.fi

.SH DESCRIPTION
.sp
.LP
The \fBncab2clf\fR command is used to convert the log file generated by the Solaris Network Cache and Accelerator (\fBNCA\fR) from binary format, to Common Log File (\fBCLF\fR) format. If no \fIinput-file\fR is specified, \fBb2clf\fR uses \fBstdin\fR. If no \fIoutput-file\fR is specified, the output goes to \fBstdout\fR. 
.SH OPTIONS
.sp
.ne 2
.mk
.na
\fB\fB-b\fR\fR
.ad
.RS 18n
.rt  
Specifies the binary-log-file blocking in kilobytes; the default is 64 Kbyte.
.RE

.sp
.ne 2
.mk
.na
\fB\fB-D\fR\fR
.ad
.RS 18n
.rt  
Specifies that direct \fBI/O\fR be disabled.
.RE

.sp
.ne 2
.mk
.na
\fB\fB-h\fR\fR
.ad
.RS 18n
.rt  
Prints usage message.
.RE

.sp
.ne 2
.mk
.na
\fB\fB-i\fR \fIinput-file\fR\fR
.ad
.RS 18n
.rt  
Specifies the input file.
.RE

.sp
.ne 2
.mk
.na
\fB\fB-n\fR \fInumber\fR\fR
.ad
.RS 18n
.rt  
Output \fInumber\fR CLF records.
.RE

.sp
.ne 2
.mk
.na
\fB\fB-o\fR \fIoutput-file\fR\fR
.ad
.RS 18n
.rt  
Specifies the output file.
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR \fIdatetime\fR\fR
.ad
.RS 18n
.rt  
Skip any records before the date and time specified in \fIdatetime\fR. You can specify the date and time in CLF format or in the format specified by the \fBtouch\fR(1) utility. CLF format is the dominant format, so \fBb2clf\fR first analyzes \fIdatetime\fR assuming CLF.
.RE

.sp
.ne 2
.mk
.na
\fB\fB-v\fR\fR
.ad
.RS 18n
.rt  
Provides verbose output.
.RE

.SH EXAMPLES
.LP
\fBExample 1 \fRConverting a Binary File to a Common Log File Format
.sp
.LP
The following example converts the binary file \fB/var//logs/.blf\fR to a file \fB/var//logs/.clf\fR, which is in Common Log File format.

.sp
.in +2
.nf
example% ncab2clf -D -i /var/nca/logs/nca.blf -o /var/nca/logs/nca.clf
.fi
.in -2
.sp

.LP
\fBExample 2 \fRConverting Multiple Log Files
.sp
.LP
The following script may be used to convert multiple log files. The directory designated by "\fB*\fR" must only contain log files. 

.sp
.in +2
.nf
!/bin/ksh
for filename in *
do
    ncab2clf -D < $filename > $filename.clf
done
.fi
.in -2

.LP
\fBExample 3 \fRUsing \fB-s\fR and \fB-n\fR on a Raw Device
.sp
.LP
The following example shows how \fBncab2clf\fR can be used on a raw device. If not using the \fB-n\fR option, the default is to convert all records from the starting location to the end of the file. The date and time specified with \fB-s\fR, below, is in CLF format.

.sp
.in +2
.nf
example% ncab2clf -s '10/Apr/2001:09:23:13' -n 100 < /dev/dsk/c2t1d0s6
.fi
.in -2
.sp

.SH EXIT STATUS
.sp
.LP
The following exit values are returned:
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 6n
.rt  
The file converted successfully
.RE

.sp
.ne 2
.mk
.na
\fB>\fB0\fR\fR
.ad
.RS 6n
.rt  
An error occurred.
.RE

.SH ATTRIBUTES
.sp
.LP
See \fBattributes\fR(5) for descriptions of the following attributes:
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
ATTRIBUTE TYPEATTRIBUTE VALUE
_
Availabilitysystem/network/http-cache-accelerator
_
Interface StabilityCommitted
.TE

.SH SEE ALSO
.sp
.LP
\fBncakmod\fR(1), \fBnca.if\fR(4), \fBncakmod.conf\fR(4), \fBncalogd.conf\fR(4), \fBattributes\fR(5), \fBnca\fR(7d)
.sp
.LP
\fIOracle Solaris Administration: IP Services\fR
.SH NOTES
.sp
.LP
The binary log files generated by \fBNCA\fR can become very large. When converting these large binary files, use the \fB-b\fR option to the \fBncab2clf\fR command to help performance.
.sp
.LP
Direct \fBI/O\fR is a benefit to the user if the data being written does not come in as large chunks. However, if the user wishes to convert the log file in large chunks using the \fB-b\fR option, then direct \fBI/O\fR should be disabled by using the \fB-D\fR option. 
